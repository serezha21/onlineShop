'use strict';



/*catsStore.push(new Category("1", "Электроника", "0", "0", null, null));
catsStore.push(new Category("2", "Бытовая техника", "0", "0", null, null));
catsStore.push(new Category("3", "Ноутбуки", "1", "1", "img/category/notebook.png", "bfdfff"));
catsStore.push(new Category("4", "Комплектующие", "1", "1", "img/category/components.jpg", "e5e2de"));
catsStore.push(new Category("5", "Планшеты", "1", "1", "img/category/tablets.png", "ffbfde"));
catsStore.push(new Category("6", "Компьютеры", "1", "1", "img/category/computers.jpg", "bfdfff"));
catsStore.push(new Category("7", "Смартфоны", "1", "1", "img/category/phone.png", "ffbfde"));
catsStore.push(new Category("8", "Телевизоры", "1", "1", "img/category/tv.png", "bfdfff"));
catsStore.push(new Category("9", "Фото и видео", "1", "1", "img/category/camera.png", "e5e2de"));
catsStore.push(new Category("10", "Мультиварки", "1", "2", "img/category/slow-cooker.png", "bfdfff"));
catsStore.push(new Category("11", "Кофеварки", "1", "2", "img/category/coffe.png", "ffd9b2"));
catsStore.push(new Category("12", "Электрочайники", "1", "2", "img/category/kettle.png", "feebb1"));
catsStore.push(new Category("13", "Мясорубки", "1", "2", "img/category/grinder.png", "e5e2de"));
catsStore.push(new Category("14", "Миксеры", "1", "2", "img/category/mixers.png", "ffbfde"));
catsStore.push(new Category("15", "Посуда", "1", "2", "img/category/utensils.png", "37DE6A"));
catsStore.push(new Category("16", "Часы", "1", "1", "img/category/watch.png", "bffaff"));*/


/*//                  Смартфоны 7
prodsStore.push(new Product("sumsung J5",3999,0,1,7,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("sumsung J7",4999,0,2,7,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Apple iPhone 6 32GB Space Gray",10999,0,3,7,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Apple iPhone 5s 16GB Space Gray",7777,0,4,7,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Apple iPhone 7 32GB Gold",17999,0,5,7,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Apple iPhone 7 Plus 128GB Gold",25999,0,6,7,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Samsung Galaxy S8 64GB Midnight Black",22999,0,7,7,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Samsung Galaxy A5 2017 Duos SM-A520 Black",11999,0,8,7,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Samsung Galaxy S8 Plus 64GB Maple Gold",26999,0,9,7,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Xiaomi Mi6 6/64GB Black",12499,0,10,7,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
//                  Ноутбуки 3
prodsStore.push(new Product("Asus VivoBook Max X541SC",9349,0,11,3,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Dell Inspiron 3552",6555,0,12,3,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Apple A1466 MacBook Air 13",27499,0,13,3,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Dell XPS 13 9350",23895,0,14,3,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Lenovo IdeaPad 510-15IKB Gun Metal",1699,0,15,3,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Asus X550VX",27274,0,16,3,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("HP 250 G5",6999,0,17,3,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Dell XPS 13 9350",23999,0,18,3,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Dell XPS 15 9560",49999,0,19,3,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Acer Aspire ES1-732-P3T6 ",8415,0,20,3,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
//                  Копьютеры 6
prodsStore.push(new Product("Everest Home 4070",30000,0,21,6,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("ARTLINE Gaming X39 v14",35000,0,22,6,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Everest Home 4070",15499,0,23,6,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Impression CoolPlay I6317",13499,0,24,6,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("ARTLINE Home H31 v01",9499,0,25,6,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("ARTLINE Gaming X47 v08",18999,0,26,6,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Dell Inspiron 3264",16800,0,27,6,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Acer Aspire C24-760",23399,0,28,6,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Acer Predator G6-710",77135,0,29,6,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Apple Mac Mini A1347",32699,0,30,6,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
//                  Телевизоры 8
prodsStore.push(new Product("Toshiba 49L5660EV",11999,0,31,8,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Sony KDL-32WE613",10999, 9000,32,8,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Samsung QE49Q7FAMUXUA",69799,0,33,8,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Panasonic Viera TX-32DSR500",8999,0,34,8,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Toshiba 32S1645EV",5199,0,35,8,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Ergo LE32CT3500AK",6899,5900,36,8,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("LG 32LH590U",9999,37,8,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("TCL U55C7006",29999,25999,38,8,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Samsung UE22H5610AKXUA",67999,0,39,8,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("LG 55UH605V",28999,0,40,8,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
//                  Камеры 9
prodsStore.push(new Product("Canon EOS 1300D EF-S 18-55mm",13999,0,41,9,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Nikon D7100 18-105mm VR Kit",27499, 25999,42,9,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Nikon D3300 AF-P 18-55mm VR Kit Black",11099,0,43,9,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Canon EOS 700D 18-55mm STM",17899,0,44,9,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Canon EOS 700D 18-55mm DC III",15999,0,45,9,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Sony Alpha 77M2 Body Black ",33999,0,46,9,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Nikon D5300 18-140mm VR Black Kit",22999,0,47,9,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Canon EOS 6D Body",36392,0,48,9,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Nikon D5300 + AF-P 18-55mm Black Kit",15499,0,49,9,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));
prodsStore.push(new Product("Nikon D7100 Body",22999,0,50,9,"img/no-image.png","img/product/brend/model/","Lorem ipsum dolor sit amet, consectetur adipisicing elit. Aliquid, deserunt!"));*/


let urlDataBase = '/lib/workDataBase.php';
let cart = new Cart();
let prodsStore = [];
let catsStore = [];

$(function(){
    $.post(urlDataBase, {v: localStorage.getItem('v')}, function(data){
        if(data['error'] === undefined) {
            let cats = data['categories'];
            let products = data['products'];
            for(let i = 0; i < cats.length; i++){
                catsStore.push(new Category(cats[i]['id'], cats[i]['title'], cats[i]['nesting'], cats[i]['id_cat'], cats[i]['image'], cats[i]['bg_color']));
            }
            for(let i = 0; i < products.length; i++){
                prodsStore.push(new Product(products[i]['id'],products[i]['title'],products[i]['price'],products[i]['new_price'],products[i]['id_cat'],products[i]['url_img'],products[i]['url_img_dir'],products[i]['description']));
            }
            console.dir(catsStore);
            viewCatsStore();
            console.dir(prodsStore);
            $('#load').hide('slow');
        }else {
            console.log('Ошабка: ' + data.error);
        }
    }, 'json').fail(function(data) {
        console.dir( data );
    });
});

function viewCatsStore(nsID = 0, viewCatList = 1){
    $('#header-left nav').empty();
    $('#header-subcategories').empty();
    $('#main').empty();
    let ulHeadLeft = $('<ul />');
    let ulSubCat = $('<ul />');
    let listCat = $('<nav id="cat-list" class="clear" />');
    for(let i = 0; i < catsStore.length; i++){
        if(+catsStore[i]['nesting'] == 0) {
            viewCat(catsStore[i], ulHeadLeft);
        }else {
            if(nsID == 0 || nsID == +catsStore[i]['nsID']){
                viewCat(catsStore[i], ulSubCat);
                if(viewCatList) viewCategory(catsStore[i], listCat);
            }
        }
    }
    $('#header-left nav').append(ulHeadLeft);
    $('#header-subcategories').append(ulSubCat);
    if(viewCatList) $('#main').append(listCat);
}

function viewCat(catStore, ul) {
    ul.append($('<li />')
            .append($('<a href="#cat-' + catStore['id'] + '">' + catStore['name'] + '</a>')
                    .click(function(){
                        if(+catStore['nesting'] == 0)
                            viewCatsStore(catStore['id']);
                        else
                            viewListProducts(catStore);
                    })));
}

function viewCategory(catStore, nav) {
    nav.append($('<div class="cat" />').css('background-color', '#' + catStore['color'])
               .click(function(){
                    viewListProducts(catStore);
                })
               .append($('<span />')
                       .append('<img src="' + catStore['imgURL'] + '" alt="' + catStore['name'] + '">'))
               .append($('<p>' + catStore['name'] + '</p>')));
}

function viewListProducts(cat) {
    $('#main').empty();
    viewCatsStore(cat['nsID'], 0);
    console.dir(cat);
    // ASIDE Category Menu
    let ulAsideMenu = $('<ul />');
    viewCat(cat, ulAsideMenu);
    // Products View
    let products = $('<div id="products" class="clear" />');
    for(let i = 0; i < prodsStore.length; i++)
        if(prodsStore[i]['category'] == cat['id'])
            viewProd(prodsStore[i], products);
    // APPEND MENU
    $('#main')
        .append('<h2>' + catsStore[cat['nsID'] - 1]['name'] + '</h2>')
        // ASIDE Category Menu
        .append($('<aside id="categories" />')
                .append($('<nav />')
                        .append(ulAsideMenu)))
        // Products View
        .append($('<div id="content" />')
                .append(products));
}

function viewProd(product, block) {
    block
        .append($('<div class="product clear" />')
                .append($('<span class="img" />')
                        .append($('<img src="' + product['urlImg'] + '" alt="' + product['name'] + '" >').click(function(e){
                            //
                            e.stopPropagation();
                        })))
                .append($('<div class="info" />')
                        .append($('<a href="#prod-' + product['id'] + '">' + product['name'] + '</a>')
                                .click(function(e){
                                    //
                                    e.stopPropagation();
                                }))
                        .append('<br>')
                        .append('<div class="price ' + (+product['newPrice'] != 0 ? 'stock' : '') + '">' + (+product['newPrice'] == 0 ? product['price'] + ' грн' : '<span>' + product['price'] + ' грн</span><br>' + product['newPrice'] + ' грн') + '</div>')
                        .append($('<button>Купить</button>')
                                .click(function(){
                                    //
                                }))));
    
}

function viewProduct(prod) {
    
}

/*
let main = document.querySelector("#main");

document.addEventListener("DOMContentLoaded", function(){
    viewCategorys();
    document.querySelector("#cart").addEventListener("click", viewCart);
    document.querySelector("#view-cart .close").addEventListener("click", function(){
        this.parentElement.parentElement.style.display = "none";
    });
});


function viewCategorys(catID = -1, prod = 0, activeCat = 0, activeSubCat = 0) {
    main.innerHTML = "";
    let listCat = document.createElement('nav');
    listCat.id = "cat-list";
    let headTopLeftNav = document.querySelector("#header-left nav");
    headTopLeftNav.innerHTML = "";
    let ulHeadNav = document.createElement("ul");
    let headSubCat = document.querySelector("#header-subcategories");
    headSubCat.innerHTML = "";
    let ulSubCat = document.createElement("ul");
    ulSubCat.classList.add("clear");
    for (let i = 0; i < category.length; i++) {
        if(category[i].nsID == 0) {
            if(activeCat && activeCat == category[i].id) {
                viewCat(ulHeadNav, i, activeCat);
                document.querySelector("title").innerHTML = "electrify | " + category[i].name;
            }
            else viewCat(ulHeadNav, i);
        }else {
            if(category[i].nsID == catID || category[i].nsID > 0 && catID < 0) {
                if(activeSubCat && activeSubCat == category[i].id) viewCat(ulSubCat, i, activeSubCat);
                else viewCat(ulSubCat, i);
                if(!prod) viewCategory(listCat, i);
            }
        }
    }
    headTopLeftNav.append(ulHeadNav);
    headSubCat.append(ulSubCat);
    main.append(listCat);
}

function viewCat(ul, i, active = 0) {
    let li = document.createElement("li");
    let a = document.createElement("a");
    a.href = "#cat-" + category[i].id;
    a.innerHTML = category[i].name;
    if(active) a.classList.add("active");
    a.addEventListener("click", function(e){
        // Удаляем class active у активной ссылки
        let thisActive = this.parentElement.parentElement.querySelector(".active");
        if(thisActive != null)
            thisActive.classList.remove("active");
        // Добавляем class active у этой ссылки
        this.classList.add("active")
        if(category[i].nsID == 0)
            viewCategorys(category[i].id,0,category[i].id);
        else
            viewListProducts(category[i]);
        e.stopPropagation();
    });
    li.append(a);
    ul.append(li);
}

function viewCategory(listCat, i){
    //создание cat
    let cat = document.createElement("div");
    cat.classList.add("cat");
    cat.style.backgroundColor = "#" + category[i].color;
    // создание img в shell
    let shell = document.createElement("span");
    let img = document.createElement("img");
    img.src = category[i].imgURL;
    img.alt = category[i].name;
    shell.append(img);
    // создание title
    let title = document.createElement("p");
    title.innerHTML = category[i].name;
    // привязка события нажатия на ссылку
    cat.addEventListener("click",function(e) {
        viewListProducts(category[i]);
        e.stopPropagation();
    });
    //добавляем картинку
    cat.append(shell);
    //добавляем название
    cat.append(title);
    //добавляем элемент в список
    listCat.append(cat);
}

function viewListProducts(cat) {
    main.innerHTML = "";
    viewCategorys(cat.nsID, 1, cat.nsID, cat.id);
    let h2 = document.createElement("h2");
    for(let i = 0; i < category.length; i++) {
        if(category[i].id == cat.nsID) {
            h2.innerHTML = category[i].name;
            break;
        }
    }
    main.append(h2);

    // ASIDE Category Menu
    let aside = document.createElement("aside");
    aside.id = "categories";
    let nav = document.createElement("nav");
    let ul = document.createElement("ul");
    for (let i = 0; i < category.length; i++) {
        if(category[i].nsID == 0 || cat.nsID != category[i].nsID) continue;
        if(cat.id == category[i].id)
           viewCat(ul, i, 1);
        else
           viewCat(ul, i);
    }
    nav.append(ul);
    aside.append(nav);
    main.append(aside);

    // Products View
    let content = document.createElement("div");
    content.id = "content";
    let products = document.createElement("div");
    products.id = "products";
    products.classList.add("clear");
    for(let i = 0; i < prodsStore.length; i++)
        if(prodsStore[i].category == cat.id)
            viewProd(products, i);
    content.append(products);
    main.append(content);

    // Pagination
}

function viewProd(products, i) {
    let productDiv = document.createElement("div");
    productDiv.classList.add("product");
    productDiv.classList.add("clear");

    // IMG
    let span = document.createElement("span");
    span.classList.add("img");
    let img = document.createElement("img");
    img.src = prodsStore[i].urlImg;
    img.alt = prodsStore[i].name;
    img.addEventListener("click", function(e){
        viewProduct(prodsStore[i]);
        e.stopPropagation();
    });
    span.append(img);
    productDiv.append(span);

    // block INFO
    let info = document.createElement("div");
    info.classList.add("info");
    let a = document.createElement("a");
    a.href = "#prod-" + prodsStore[i].id;
    a.innerHTML = prodsStore[i].name;
    a.addEventListener("click", function(e){
        viewProduct(prodsStore[i]);
        e.stopPropagation();
    });
    info.append(a);
    info.append(document.createElement("br"));
    // Price
    let price = document.createElement("div");
    price.classList.add("price");
    if(prodsStore[i].newPrice == 0){
        price.innerHTML = prodsStore[i].price + " грн";
    }else{
        price.classList.add("stock");
        let spanPrice = document.createElement("span");
        spanPrice.innerHTML = prodsStore[i].price + " грн";
        price.append(spanPrice);
        price.append(document.createElement("br"));
        price.append(prodsStore[i].newPrice + " грн");
    }
    info.append(price);
    // Button Купить
    let button = document.createElement("button");
    button.innerHTML = "Купить";
    button.addEventListener("click", function() {
        addToCart(prodsStore[i]);
    });
    info.append(button);
    productDiv.append(info);
    products.append(productDiv);
}

// get Category
function getCategory(id) {
    for(let i = 0; i < category.length; i++)
        if(category[i].id == id)
            return category[i].name;
}

// view Product
function viewProduct(prod) {
    main.innerHTML = '<div id="photo-slider"><span><img class="main" src="img/product/apple/iphone-7/7.jpg" alt="apple iphone 7"></span><div class="pagination clear"><img src="img/product/apple/iphone-7/7.jpg" alt="apple iphone 7"><img src="img/product/apple/iphone-7/8.jpg" alt="apple iphone 7"><img src="img/product/apple/iphone-7/9.jpg" alt="apple iphone 7"><img src="img/product/apple/iphone-7/1.jpg" alt="apple iphone 7"><img src="img/product/apple/iphone-7/2.jpg" alt="apple iphone 7"><img src="img/product/apple/iphone-7/3.jpg" alt="apple iphone 7"><img src="img/product/apple/iphone-7/4.jpg" alt="apple iphone 7"><img src="img/product/apple/iphone-7/5.jpg" alt="apple iphone 7"><img src="img/product/apple/iphone-7/6.jpg" alt="apple iphone 7"></div></div><div id="product-info"><div class="title"><h2>Apple iPhone 7 32GB Black</h2><div class="rating"><i class="fa fa-star" aria-hidden="true"></i><i class="fa fa-star" aria-hidden="true"></i><i class="fa fa-star" aria-hidden="true"></i><i class="fa fa-star" aria-hidden="true"></i><i class="fa fa-star" aria-hidden="true"></i><span>5 отзывов</span></div><div class="price">21 999 грн<span>22 999 грн</span></div></div><div class="memory"><span>Обьем памяти</span><button class="gb active">32 Гб</button> <button class="gb disable">64 Гб</button> <button class="gb disable">128 Гб</button></div><div class="order-btns"><button class="add-to-cart active">В корзину</button> <button class="fast-order">Быстрый заказ</button></div><div id="slider-1" class="slider"><div class="navigation"><a href="#feature" class="active" title="feature">Характеристики</a><a href="#description" title="description">Описание</a></div><div class="slids"><div class="slide feature active"><table><tr><td class="property">Бренд</td><td class="value">Most Famous</td></tr><tr><td class="property">Серия</td><td class="value">самая лучшая</td></tr><tr><td class="property">Страна производитель</td><td class="value">Украина</td></tr><tr><td class="property">Тип</td><td class="value">годный товар</td></tr><tr><td class="property">Комплектация</td><td class="value">расширенная</td></tr><tr><td class="property">Размеры, мм</td><td class="value">100 х 50 х 75</td></tr><tr><td class="property">Вид продукции</td><td class="value">хорошая продукция</td></tr><tr><td class="property">Классификация</td><td class="value">сделано для людей</td></tr><tr><td class="property">Коллекция</td><td class="value">2017-2018</td></tr><tr><td class="property">Краткие характеристики</td><td class="value">хороший товар, нужно брать</td></tr></table></div><div hidden class="slide description"><p><b>В iPhone 7 и Phone 7 Plus воплощены последние достижения Apple в области защиты окружающей среды. Следующие особенности устройств снижают их воздействие на окружающую среду:</b></p><ul><li>Дисплей с подсветкой LED не содержит ртути</li><li>Стекло дисплея не содержит мышьяка</li><li>Не содержит бромированных огнестойких добавок</li><li>Не содержит ПВХ</li><li>Корпус из алюминия, пригодного для вторичной переработки</li></ul></div></div></div><div id="slider-2" class="slider"><div class="navigation"><a href="#shipping" class="active" title="shipping">Доставка</a><a href="#payment" title="payment">Оплата</a><a href="#guarantee" title="guarantee">Гарантия</a><a href="#return" title="return">Возврат</a></div><div class="slids"><div class="slide shipping active"><p>Самовывоз <br>- из нашего магазина - бесплатно. <br>- из Новой Почты - бесплатно.</p><p>Курьером по Киеву <br>Мы доставим этот товар курьером службы доставки по вашему адресу - 35 грн</p></div><div hidden class="slide payment"><h4>Наличная</h4><p>Оплата наличными приполучении товара</p><h4>Безналичными</h4><p>Оплата по безналичному расчету производится в кассе отделения любого банка или с расчетного счета Вашей фирмы </p><p>При выборе безналичного способа оплаты доставка заказа возможна после поступления средств на наш расчетный счет</p>                        <h4>Visa и MasterCard</h4><p>Оплата заказа онлайн банковской картой Visa и MasterCard</p><p>Доставка товара возможна только после подтверждения платежа.</p></div><div hidden class="slide guarantee"><h4>Обмен и возврат товара в течение первых 14 дней после покупки.</h4><p>В соответствии с «Законом о защите прав потребителя» покупатели нашего магазина имеют право обменять или вернуть купленный у нас товар в течение первых 14 дней после покупки. <br>Пожалуйста, обратите внимание — обмену или возврату подлежит только новый товар, который не был в употреблении и не имеет следов использования: царапин, сколов, потёртостей, на счётчике телефона не более 5 минут разговоров, программное обеспечение не подвергалось изменениям и т.п. А так же должно быть сохранено:</p><ul><li>полный комплект товара;</li>                            <li>целостность и все компоненты упаковки;</li><li>ярлыки;</li><li>заводская маркировка.</li></ul></div><div hidden class="slide return"><h4>Где и как можно произвести обмен или возврат?</h4><p>Обменять или вернуть товар можно в нашем сервисном отделе по адресу: <br>г. Киев, ул. Рубинова (Релекс), 650, c понедельника по пятницу с 10-00 до 19-00, в субботу — с 10-00 до 17-00. Телефон: (044) 356-78-90</p></div></div></div></div>';
    slider("slider-1");
    slider("slider-2");
    sliderIMG("photo-slider");

    let mainIMG = document.querySelector("#photo-slider .main");
    mainIMG.src = prod.urlImg;
    mainIMG.alt = prod.name;

    let title = document.querySelector("#product-info h2");
    title.innerHTML = prod.name;

    let price = document.querySelector("#product-info .price");
    if(prod.newPrice == 0) price.innerHTML = prod.price + " грн";
    else {
        price.innerHTML = prod.newPrice + " грн";
        let span = document.createElement("span");
        span.innerHTML = prod.price + " грн";
        price.append(span);
    }

    let desc = document.querySelector("#product-info .description");
    desc.innerHTML = prod.description;
}

function addToCart(prod) {
    let viewCartContent = document.querySelector("#view-cart .content");
    if(cart.length == 0){
        viewCartContent.innerHTML = "";
        let h2 = document.createElement("h2");
        h2.innerHTML = "Корзина";
        viewCartContent.append(h2);
    }
    cart.addProduct(prod);
	if(cart.getCount(prod) > 1){
		document.querySelector("#val" + prod.id).value = cart.getCount(prod);
		document.querySelector("#allPrice" + prod.id).innerHTML = cart.getCount(prod) * prod.price;
		return;
	}
    document.querySelector("#cart").innerHTML = cart.length;
    addProductCart(viewCartContent, prod);
    //
}

function addProductCart(viewCartContent, prod) {
	// product
	let productCart = document.createElement("div");
    productCart.classList.add("product");
    productCart.classList.add("clear");
	
	// уадление продукта из корзины
    let iRemove = document.createElement("i");
    iRemove.classList.add("fa");
    iRemove.classList.add("fa-times-circle-o");
    iRemove.classList.add("remove");
    iRemove.addEventListener("click", function() {
        this.parentElement.remove();
        cart.delProduct(prod);
        document.querySelector("#cart").innerHTML = cart.length;
		if(cart.length == 0)
			cartEmpty(viewCartContent);
    });
    productCart.append(iRemove);
	
	// картинка продукта 
    let imgCart = document.createElement("img");
    imgCart.src = prod.urlImg;
    imgCart.alt = prod.name;
    productCart.append(imgCart);
	
	// информация о продукте
    let infoCart = document.createElement("div");
    infoCart.classList.add("info");
	// {
		// Название продукта
		let titleCart = document.createElement("div");
		titleCart.classList.add("title");
		titleCart.classList.add("clear");
		// {
			// Ссылка на продукт
			let aCart = document.createElement("a");
			aCart.href = "#";
			aCart.innerHTML = prod.name;
			aCart.addEventListener("click", function() {
				viewProduct(prod);
				document.querySelector("#view-cart").style.display = "none";
			});
			titleCart.append(aCart);
			// Span Сумма
			let spanCart = document.createElement("span");
			spanCart.innerHTML = "Сумма";
			titleCart.append(spanCart);
			infoCart.append(titleCart);
		// }
		// block prices
		let pricesCart = document.createElement("div");
		pricesCart.classList.add("prices");
		pricesCart.classList.add("clear");
		// {
			// Цена
			let priceCart = document.createElement("div");
			priceCart.classList.add("price");
			priceCart.innerHTML = prod.price;
			pricesCart.append(priceCart);
			// Общая стоимость за кол-во
			let allPriceCart = document.createElement("div");
			allPriceCart.classList.add("allPrice");
			allPriceCart.innerHTML = prod.price;
			allPriceCart.id = "allPrice" + prod.id;
			pricesCart.append(allPriceCart);
			// block Count
			let quantityCart = document.createElement("div");
			quantityCart.classList.add("quantity");
			// {
				// minusQuantity
				let minusCart = document.createElement("i");
				minusCart.classList.add("fa");
				minusCart.classList.add("fa-minus");
				minusCart.addEventListener("click", function() {
					let allPrice = this.parentElement.parentElement.querySelector(".allPrice");
					let inputCount = this.parentElement.querySelector("input");
					let inputValue = +(inputCount.value);
					inputValue--;
					document.querySelector("#cart").innerHTML = cart.length;
					if(inputValue <= 0) {
						this.parentElement.parentElement.parentElement.parentElement.remove();
						cart.delProduct(prod);
						document.querySelector("#cart").innerHTML = cart.length;
						if(cart.length == 0)
							cartEmpty(viewCartContent);
						return;
					}
					cart.changeCount(prod, inputValue);
					inputCount.value = inputValue;
					allPrice.innerHTML = inputValue * prod.price;
				});
				quantityCart.append(minusCart);
				// inputQuantity
				let inputCart = document.createElement("input");
				inputCart.type = "text";
				inputCart.value = "1";
				inputCart.id = "val" + prod.id;
				quantityCart.append(inputCart);
				// plusQuantity
				let plusCart = document.createElement("i");
				plusCart.classList.add("fa");
				plusCart.classList.add("fa-plus");
				plusCart.addEventListener("click", function() {
					let allPrice = this.parentElement.parentElement.querySelector(".allPrice");
					let inputCount = this.parentElement.querySelector("input");
					cart.addProduct(prod);
					let inputValue = +(inputCount.value);
					inputValue++;
					if(inputValue <= 0) {
						this.parentElement.parentElement.parentElement.parentElement.remove();
						return;
					}
					inputCount.value = inputValue;
					allPrice.innerHTML = inputValue * prod.price;
				});
				quantityCart.append(plusCart);
			// }
			pricesCart.append(quantityCart);
		// }
	// }
    infoCart.append(pricesCart);
    productCart.append(infoCart);
    viewCartContent.append(productCart);
}

function cartEmpty(viewCartContent) {
	let h1 = document.createElement("h1");
	let iCart = document.createElement("i");
	iCart.classList.add('fa');
	iCart.classList.add('fa-shopping-cart');
	h1.append(iCart);
	h1.innerHTML += ' Корзина пуста';
	viewCartContent.innerHTML = "";
	viewCartContent.append(h1);
}

// onClick to #cart
function viewCart() {
    document.querySelector("#view-cart").style.display = "block";
}

// Product INFO Slider
function slider(nameSlider) {
    let sliderA = document.querySelectorAll("#" + nameSlider + " a");
    for(let i = 0; i < sliderA.length; i++){
        sliderA[i].addEventListener("click", function(e) {
            let active = document.querySelector("#" + nameSlider + " .navigation .active");
            active.classList.remove("active");
            this.classList.add("active");
            active = document.querySelector("#" + nameSlider + " .slids .active");
            active.style.display = "none";
            active.classList.remove("active");
            active = document.querySelector("#" + nameSlider + " ." + this.title);
            active.style.display = "block";
            active.classList.add("active");
            e.stopPropagation();
        }, false);
    }
}

// Slider IMG
function sliderIMG(nameSlider) {
    let listImg = document.querySelectorAll("#" + nameSlider + " .pagination img");
    for(let i = 0; i < listImg.length; i++){
        listImg[i].addEventListener("click", function() {
            document.querySelector("#" + nameSlider + " .main").src = this.src;
        });
    }
}*/
